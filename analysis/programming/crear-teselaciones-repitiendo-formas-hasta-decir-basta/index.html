

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Crear teselaciones (repitiendo formas hasta decir ¡basta!) - Benito Zaragozí</title>







<meta property="og:locale" content="en">
<meta property="og:site_name" content="Benito Zaragozí">
<meta property="og:title" content="Crear teselaciones (repitiendo formas hasta decir ¡basta!)">




  <meta property="og:description" content="Nota: Este es un no tan viejo post de GIS&amp;Chips en el que presentaba una aplicación de consola para generar teselaciones regulares utilizando NTS. El post sigue siendo el mismo pero ahora podéis descargar el proyecto de VisualStudio que he compartido en GitHub [Ir al proyecto].">



  <meta name="twitter:site" content="@benizar81">
  <meta name="twitter:title" content="Crear teselaciones (repitiendo formas hasta decir ¡basta!)">
  <meta name="twitter:description" content="Nota: Este es un no tan viejo post de GIS&amp;Chips en el que presentaba una aplicación de consola para generar teselaciones regulares utilizando NTS. El post sigue siendo el mismo pero ahora podéis descargar el proyecto de VisualStudio que he compartido en GitHub [Ir al proyecto].">
  <meta name="twitter:url" content="">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2012-11-21T00:00:00+00:00">
  
    <link rel="next" href="/analysis/presentation/diapositivas-del-ultimo-meetup-sobre-simbologia-cartografica-estandares-y-sig/" title="Diapositivas del último meetup sobre simbología cartográfica, estándares y SIG">
  
  
    <link rel="prev" href="/presentaci%C3%B3n/taller-de-gps/" title="Taller de GPS">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Benito Zaragozí",
      "url" : null,
      "sameAs" : ["https://twitter.com/benizar81","https://facebook.com/benizar81","https://www.linkedin.com/in/benizar","https://www.researchgate.net/profile/Benito_Zaragozi","http://orcid.org/0000-0003-2501-484X"]
    }
  </script>






<!-- end SEO -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Benito Zaragozí Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/academicons.min.css"/>

<meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="/">Benito Zaragozí</a></li>
          
            
            <li class="masthead__menu-item"><a href="/year-archive/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="/cv/">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="/contact/">Contact</a></li>
          
            
            <li class="masthead__menu-item"><a href="/about/">About me</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="/images/benizar-photo.jpg" class="author__avatar" alt="Benito Zaragozí">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Benito Zaragozí</h3>
    <p class="author__bio">Geographer and GIScientist</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Vila-Seca, Spain</li>
      
      
      
        <li><a href="mailto:benizar@gmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      

      
        <li><a href="https://orcid.org/0000-0003-2501-484X"><i class="ai ai-fw ai-orcid" aria-hidden="true" style="color:#a6ce39ff;"></i>ORCID</a></li>
      
      
        <li><a href="http://www.researcherid.com/rid/B-5270-2019"><i class="ai ai-fw ai-researcherid" aria-hidden="true" style="color:#ffa500;"></i>ResearcherID</a></li>
      
      
        <li><a href="https://scholar.google.es/citations?user=sO9xAc8AAAAJ"><i class="ai ai-fw ai-google-scholar-square" aria-hidden="true"  style="color:#508ef3ff;"></i>Google Scholar</a></li>
      
      
        <li><a href="https://www.researchgate.net/profile/Benito_Zaragozi"><i class="ai ai-fw ai-researchgate-square" aria-hidden="true" style="color:#00e3abff;"></i>ResearchGate</a></li>
      
      
        <li><a href="https://www.mendeley.com/profiles/benito-zaragozi"><i class="ai ai-fw ai-mendeley-square" aria-hidden="true" style="color:#a51925ff;"></i>Mendeley</a></li>
      

      
        <li><a href="https://bitbucket.org/benizar"><i class="fa fa-fw fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
      
      
        <li><a href="https://github.com/benizar"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      


      
        <li><a href="https://www.linkedin.com/in/benizar"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      

      
        <li><a href="https://twitter.com/benizar81"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
        <li><a href="https://www.facebook.com/benizar81"><i class="fa fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
      


      
      
      


      
      
      
      


      
      
      
      
      
      
      
      
      
      

    </ul>
  </div>
</div>


  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Crear teselaciones (repitiendo formas hasta decir ¡basta!)">
    <meta itemprop="description" content="Nota: Este es un no tan viejo post de GIS&amp;Chips en el que presentaba una aplicación de consola para generar teselaciones regulares utilizando NTS. El post sigue siendo el mismo pero ahora podéis descargar el proyecto de VisualStudio que he compartido en GitHub [Ir al proyecto].">
    <meta itemprop="datePublished" content="November 21, 2012">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Crear teselaciones (repitiendo formas hasta decir ¡basta!)
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  14 minute read
	
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p class="notice--info"><strong>Nota:</strong> Este es un <em>no tan viejo</em> post de GIS&amp;Chips en el que presentaba una aplicación de consola para generar teselaciones regulares utilizando NTS. El post sigue siendo el mismo pero ahora podéis descargar el proyecto de VisualStudio que he compartido en GitHub <a href="https://github.com/benizar/RepeatShapes">[Ir al proyecto]</a>.</p>

<p>Según la <a href="http://es.wikipedia.org/wiki/Teselado">Wikipedia</a>, un teselado o teselación es una regularidad o patrón de figuras que cubre completamente una superficie, sin dejar huecos y sin que las figuras se superpongan. Los que habéis trabajado mucho con SIG ya tenéis una buena idea de a que me estoy refiriendo.</p>

<p>En este post quiero hablaros un poco más de las teselaciones, comentar algunas aplicaciones y proponeros algo de código de ejemplo. Utilizando software libre, por supuesto…</p>

<figure class="half">
    <a href="/images/image02.png"><img src="/images/image02.png" /></a>
</figure>

<p>Además, en la wikipedia se puede ver que existen numerosos tipos de teselaciones. De un modo general, éstas se pueden clasificar en teselaciones regulares, semirregulares e irregulares. Generalmente, en SIG se suelen utilizar distintas teselaciones regulares e irregulares para el análisis de zonas geográficas. Las teselaciones irregulares (Voronoi y Delaunay, de todo tipo) dan mucho juego. Podemos encontrar libros y publicaciones científicas de lo más interesantes (por ejemplo, podrías dedicar meses a leer y releer el libro <a href="http://www.amazon.es/Spatial-Tessellations-Applications-Probability-Statistics/dp/0471986356">Spatial Tessellations</a>. Sin embargo, en este post nos centraremos en las teselaciones regulares más simples y las variaciones que pueden experimentar (ver la figura de arriba).</p>

<h2 id="para-qué-sirven">¿Para qué sirven?</h2>

<p>Las aplicaciones de las teselaciones en Geografía y SIG son muchas. Por mencionar algunas de las más habituales:</p>

<ul>
  <li><strong>Estudios del paisaje a distintas escalas.</strong> En las siguiente figura podéis apreciar lo que sucedería si calculásemos el valor medio de los píxeles dentro de cada hexágono. Si tratásemos de contar las “celdas” que están mayormente ocupadas por el amarillo más intenso, obtendríamos valores distintos. Este tipo de consideraciones son muy tenidas en cuenta en los estudios de Ecología del Paisaje. Es necesario seleccionar la forma del grid, sus dimensiones y también su orientación. Esto nos dará una idea de la estructura espacial del paisaje. En la bibliografía se habla de “escalogramas” para estudiar los efectos del grid (<a href="http://www.google.es/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;ved=0CCgQFjAC&amp;url=http%3A%2F%2Fleml.asu.edu%2Fjingle%2FWeb_Pages%2FWu_Pubs%2FPDF_Files%2FWu_scalograms1_2002.pdf&amp;ei=hF6rUMPAOczWsgaE-YGwAg&amp;usg=AFQjCNEfF95Ca5czUvtNfCW2CvbX-E8qnA">Wu et al., 2002</a>)</li>
</ul>

<figure class="half">
    <a href="/images/tesselation-hexagon-big.jpg"><img src="/images/tesselation-hexagon-big.jpg" /></a>
    <a href="/images/tesselation-hexagon-small.jpg"><img src="/images/tesselation-hexagon-small.jpg" /></a>
</figure>

<p><a href="http://www.cnfer.on.ca/SEP/patchanalyst/overview.htm">http://www.cnfer.on.ca/SEP/patchanalyst/overview.htm</a></p>

<ul>
  <li><strong>Muestreos de la zona de estudio.</strong> Son muy utilizados en estudios biogeográficos donde se determina la presencia-ausencia de una determinada especie. Por ejemplo, el código que presento en este post fue desarrollado para un estudio de fototrampeo .</li>
</ul>

<figure class="third">
    <a href="/images/tesselation-biodiversity.png"><img src="/images/tesselation-biodiversity.png" /></a>
</figure>

<ul>
  <li><strong>Diseño de cartografía.</strong> El ejemplo más típico de uso de una cuadrícula es el del mapa turístico donde se utiliza un grid para localizar de manera relativa los elementos de interés. También se suelen crear cuadrículas UTM o se crean <a href="http://www.esri.com/news/arcuser/0702/dsmapbook1of2.html">Mapbooks</a> que organizan una serie de mapas.</li>
</ul>

<figure class="half">
    <a href="/images/tesselation-map-collection.jpg"><img src="/images/tesselation-map-collection.jpg" /></a>
    <a href="/images/tesselation-reference-map.gif"><img src="/images/tesselation-reference-map.gif" /></a>
</figure>

<ul>
  <li><strong>Interpolación espacial.</strong> En este caso predomina el uso de teselaciones no regulares. Por ejemplo, las triangulaciones de Delaunay son una alternativa muy utilizada para la creación de modelos digitales de elevaciones detallados. Igualmente, los polígonos de Voronoi se han utilizado en múltiples contextos, por ejemplo, para determinar la necesidad de instalar nuevos observatorios meteorológicos.</li>
</ul>

<figure class="half">
    <a href="/images/tesselation-tin.jpg"><img src="/images/tesselation-tin.jpg" /></a>
</figure>

<h2 id="software-de-ejemplo">Software de ejemplo</h2>

<p>Si tuviese que mencionar un software interesante para realizar teselaciones os recomendaría echarle un vistazo al <a href="http://www.jennessent.com/arcgis/repeat_shapes.htm">Repeating Shapes for ArcGIS</a>. Se trata de una extensión de ArcGIS, creada por el biólogo <strong>Jeff Jenness</strong>, que permite crear las teselaciones básicas, modificándolas según distintos parámetros (forma, dimensiones y ángulos). El manual que aparece en la web resulta muy explicativo para entender las teselaciones más básicas. Sin embargo, esta extensión es muy limitada si tenemos la necesidad de generar muchos grids, o añadir nuevos parámetros. Además, como hemos dejado entrever, existen muchas otras configuraciones posibles que este software no contempla.</p>

<h2 id="propuesta-de-software">Propuesta de software</h2>

<p>He decidido ordenar un poco mis ideas y he creado un software que calcula teselaciones simples (rectángulos, triángulos y hexágonos). Se trata de una aplicación de consola que solicita una serie de parámetros para calcular la teselación. Esta aplicación utiliza la NetTopologySuite v1.11 y funciona bien sobre la versión 4.0 de la plataforma Mono.</p>

<figure class="half">
    <a href="/images/mb-tessellation-cmd.png"><img src="/images/mb-tessellation-cmd.png" /></a>
</figure>

<p>Como podéis ver los parámetros son los siguientes:</p>

<ol>
  <li>un fichero que contenga una geometría en formato “Well-Known Text” (se pide un fichero ya que una geometría completa nos ocuparía toda la pantalla).</li>
  <li>el alto y ancho de cada “celda”.</li>
  <li>el tipo de forma deseada (rectángulo, triángulo o hexágono).</li>
  <li>el ángulo de rotación de la teselación y, <u>en caso de tratarse de hexágonos</u>,</li>
  <li>un radio, que es una medida que define el estiramiento de los polígonos (no creo que sea la manera habitual de crear estas geometrías, pero da mucha flexibilidad).</li>
</ol>

<p>Finalmente, el programa calcula la teselación y pregunta si quereis crear otra teselación más (no creo que resulte adictivo :-) El resultado que genera el software es una WKT GeometryCollection, que podemos visualizar en distintos SIG de escritorio (yo utilizo OpenJump).</p>

<p>Una vez definidos los parámetros de entrada, hay algunas cuestiones que pueden resultar interesantes sobre el programa.</p>

<p>El código se divide en dos clases (más la del interfaz de usuario, claro). Existe una clase (1) <em>MyGeometricShapeFactory</em> que calcula triángulos y hexágonos a partir de los parámetros de entrada. Esta clase hereda de la <em>GeometricShapeFactory</em> de NTS, que se ocupa de crear los rectángulos. Por otro lado, existe otra clase (<em>GraticuleBuilder</em>; 2) que se ocupa de la repetición de figuras (haciendo servir la clase 1). Esta clase (2) permite crear un grid mucho mayor que la zona de estudio y filtrarlo con operadores espaciales para obtener otro “grid ajustado” a la zona de estudio.</p>

<p>En la siguiente figura se puede ver como se calcula la zona que debe cubrir el grid mayor. Por supuesto, habrá otros métodos de definir el área mayor, pero esta es bastante sencilla de entender y programar con NTS.</p>

<figure class="half">
    <a href="/images/mb-tesselation-methodology.png"><img src="/images/mb-tesselation-methodology.png" /></a>
</figure>

<h2 id="algunos-ejemplos-utilizando-esto">Algunos ejemplos utilizando esto:</h2>

<p>Para que os hagáis una idea de lo que permite el software he preparado algunos ejemplos interesantes:</p>

<ul>
  <li>Ancho de celda: 5000 m, Alto de celda: 5000 m, Forma: rectangle, Ángulo: 0 y Radio: 0 (<strong>Completo</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/mb-tesselation-squares-big.png"><img src="/images/mb-tesselation-squares-big.png" /></a>
</figure>

<ul>
  <li>Ancho de celda: 2500 m, Alto de celda: 2500 m, Forma: rectangle, Ángulo: 0 y Radio: 0 (<strong>Ajustado</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/tesselation-squares-small.png"><img src="/images/tesselation-squares-small.png" /></a>
</figure>

<ul>
  <li>Ancho de celda: 5000 m, Alto de celda: 1000 m, Forma: rectangle, Ángulo: 0 y Radio: 0 (<strong>Ajustado</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/Captura de pantalla de 2012-11-20 13_55_05.png"><img src="/images/Captura de pantalla de 2012-11-20 13_55_05.png" /></a>
</figure>

<ul>
  <li>Ancho de celda: 5000 m, Alto de celda: 2500 m, Forma: triangle, Ángulo: 45 y Radio: 0 (<strong>Ajustado</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/mb-tesselation-rectangles.png"><img src="/images/mb-tesselation-rectangles.png" /></a>
</figure>

<ul>
  <li>Ancho de celda: 5000 m, Alto de celda: 5000 m, Forma: hexagon, Ángulo: 45 y Radio: 1000 m (<strong>Ajustado</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/mb-tesselation-hexagons.png"><img src="/images/mb-tesselation-hexagons.png" /></a>
</figure>

<ul>
  <li>Ancho de celda: 5000 m, Alto de celda: 5000 m, Forma: hexagon, Ángulo: 0 y Radio: 2000 m (<strong>Ajustado</strong>).</li>
</ul>

<figure class="half">
    <a href="/images/mb-tesselation-hexagons-stretched.png"><img src="/images/mb-tesselation-hexagons-stretched.png" /></a>
</figure>

<h2 id="código-comentado">Código comentado:</h2>

<p>A continuación os adjunto el código que hace todo esto posible. No incluyo lo referente al UI, pero comprobareis que tampoco hay que hacer nada del otro mundo para utilizarlo (new GraticuleBuilder). Además, os tendréis que crear un enumerado con las formas (rectangle, triangle y hexagon).</p>

<p>Primero tenéis la clase que crea la tesela:</p>

<div class="language-csharp highlighter-rouge"><pre class="highlight"><code><span class="c1">//GraticuleBuilder class for creating tessellations.
//Copyright (C) 2012 Benito M. Zaragozi
//Authors: Benito M. Zaragozi­ (www.gisandchips.org)
//Send comments and suggestions to benito.zaragozi@ua.es
</span>
<span class="c1">//This program is free software: you can redistribute it and/or modify
//it under the terms of the GNU General Public License as published by
//the Free Software Foundation, either version 3 of the License, or
//(at your option) any later version.
//
//This program is distributed in the hope that it will be useful,
//but WITHOUT ANY WARRANTY; without even the implied warranty of
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//GNU General Public License for more details.
//
//You should have received a copy of the GNU General Public License
//along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">NetTopologySuite.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">NetTopologySuite.Geometries</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">NetTopologySuite.Utilities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">GeoAPI.Geometries</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">RepeatShapes</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">class</span> <span class="nc">GraticuleBuilder</span>
	<span class="p">{</span>
		<span class="k">public</span> <span class="nf">GraticuleBuilder</span> <span class="p">(</span><span class="n">IGeometry</span> <span class="n">studyArea</span><span class="p">,</span><span class="kt">int</span> <span class="n">cellWidth</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cellHeight</span><span class="p">,</span> <span class="n">ShapeType</span> <span class="n">shp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">angle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">_studyArea</span><span class="p">=</span><span class="n">studyArea</span><span class="p">;</span>
			<span class="nf">GetBigArea</span> <span class="p">(</span><span class="n">_studyArea</span><span class="p">,</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">cellHeight</span><span class="p">);</span>
			<span class="n">_origin</span><span class="p">=</span><span class="nf">GetOrigin</span> <span class="p">(</span><span class="n">_bigArea</span><span class="p">);</span>

			<span class="k">if</span><span class="p">(</span><span class="n">shp</span><span class="p">==</span> <span class="n">ShapeType</span><span class="p">.</span><span class="n">rectangle</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">_bigGrid</span> <span class="p">=</span> <span class="nf">rectRepeat</span><span class="p">(</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">cellHeight</span><span class="p">,</span><span class="n">_bigGridRows</span><span class="p">,</span><span class="n">_bigGridCols</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">shp</span><span class="p">==</span><span class="n">ShapeType</span><span class="p">.</span><span class="n">triangle</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">_bigGrid</span> <span class="p">=</span> <span class="nf">triRepeat</span><span class="p">(</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">cellHeight</span><span class="p">,</span><span class="n">_bigGridRows</span><span class="p">,</span><span class="n">_bigGridCols</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">shp</span><span class="p">==</span><span class="n">ShapeType</span><span class="p">.</span><span class="n">hexagon</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">_bigGrid</span> <span class="p">=</span> <span class="nf">hexRepeat</span><span class="p">(</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">cellHeight</span><span class="p">,</span><span class="n">_bigGridRows</span><span class="p">,</span><span class="n">_bigGridCols</span><span class="p">,</span> <span class="n">radius</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="n">_bigGrid</span> <span class="p">=</span> <span class="nf">rotateGrid</span> <span class="p">(</span><span class="n">_bigGrid</span><span class="p">,</span> <span class="n">_studyArea</span><span class="p">,</span> <span class="n">angle</span><span class="p">);</span>
			<span class="n">_filteredGrid</span><span class="p">=</span><span class="nf">gridFilter</span><span class="p">(</span><span class="n">_bigGrid</span><span class="p">,</span><span class="n">_studyArea</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="n">IGeometry</span> <span class="n">_studyArea</span><span class="p">;</span>
		<span class="n">IGeometry</span> <span class="n">_bigArea</span><span class="p">;</span>
		<span class="n">IPoint</span> <span class="n">_origin</span><span class="p">;</span>
		<span class="n">GeometryCollection</span> <span class="n">_bigGrid</span><span class="p">;</span>
		<span class="n">GeometryCollection</span> <span class="n">_filteredGrid</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">_bigGridRows</span><span class="p">=</span><span class="m">0</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">_bigGridCols</span><span class="p">=</span><span class="m">0</span><span class="p">;</span>

		<span class="k">public</span> <span class="n">IGeometry</span> <span class="n">StudyArea</span> <span class="p">{</span>
			<span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_studyArea</span><span class="p">;</span> <span class="p">}</span>
		<span class="p">}</span>

		<span class="k">public</span> <span class="n">GeometryCollection</span> <span class="n">BigGrid</span>
		<span class="p">{</span>
			<span class="k">get</span><span class="p">{</span><span class="k">return</span> <span class="n">_bigGrid</span><span class="p">;}</span>
		<span class="p">}</span>

		<span class="k">public</span> <span class="n">GeometryCollection</span> <span class="n">FilteredGrid</span>
		<span class="p">{</span>
			<span class="k">get</span><span class="p">{</span><span class="k">return</span> <span class="n">_filteredGrid</span><span class="p">;}</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Calculates the left-bottom coordinate/point of a geometry.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// The origin point for the grid.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='bigAreaEnvelope'&gt;
</span>		<span class="c1">/// A big area that encloses the study area.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">Point</span> <span class="nf">GetOrigin</span><span class="p">(</span><span class="n">IGeometry</span> <span class="n">bigAreaEnvelope</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">double</span> <span class="n">minX</span><span class="p">=</span><span class="m">0</span><span class="p">;</span>
			<span class="kt">double</span> <span class="n">minY</span><span class="p">=</span><span class="m">0</span><span class="p">;</span>

			<span class="k">foreach</span><span class="p">(</span><span class="n">Coordinate</span> <span class="n">c</span> <span class="k">in</span> <span class="n">bigAreaEnvelope</span><span class="p">.</span><span class="n">Coordinates</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">minX</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
				<span class="n">minY</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>

				<span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">X</span> <span class="p">&lt;</span> <span class="n">minX</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">minX</span><span class="p">=</span><span class="n">c</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">Y</span><span class="p">&lt;</span><span class="n">minY</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">minY</span><span class="p">=</span><span class="n">c</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="n">Point</span> <span class="n">p</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Point</span><span class="p">(</span><span class="n">minX</span><span class="p">,</span><span class="n">minY</span><span class="p">);</span>
			<span class="k">return</span> <span class="n">p</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Create a big rectangle containing the study area.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;param name="studyArea"&gt;&lt;/param&gt;
</span>		<span class="c1">/// &lt;param name="widthDivBy"&gt;&lt;/param&gt;
</span>		<span class="c1">/// &lt;param name="heightDivBy"&gt;&lt;/param&gt;
</span>		<span class="k">private</span> <span class="k">void</span> <span class="nf">GetBigArea</span><span class="p">(</span><span class="n">IGeometry</span> <span class="n">studyArea</span><span class="p">,</span> <span class="kt">int</span> <span class="n">widthDivBy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">heightDivBy</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="c1">//circumscribed circle for obtaining its envelope and create the bigArea.
</span>			<span class="n">NetTopologySuite</span><span class="p">.</span><span class="n">Algorithm</span><span class="p">.</span><span class="n">MinimumBoundingCircle</span> <span class="n">mbc</span> <span class="p">=</span>
				<span class="k">new</span> <span class="n">NetTopologySuite</span><span class="p">.</span><span class="n">Algorithm</span><span class="p">.</span><span class="nf">MinimumBoundingCircle</span><span class="p">(</span><span class="n">studyArea</span><span class="p">);</span>

			<span class="n">_bigArea</span> <span class="p">=</span> <span class="n">mbc</span><span class="p">.</span><span class="nf">GetCircle</span> <span class="p">().</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Boundary</span><span class="p">;</span>
			<span class="kt">double</span> <span class="n">diameter</span> <span class="p">=</span> <span class="n">mbc</span><span class="p">.</span><span class="nf">GetRadius</span> <span class="p">()*</span><span class="m">4</span><span class="p">;</span>

			<span class="c1">//get the total num of cols and rows
</span>			<span class="n">_bigGridCols</span><span class="p">=(</span><span class="kt">int</span><span class="p">)</span><span class="n">diameter</span><span class="p">/</span><span class="n">widthDivBy</span><span class="p">;</span>
			<span class="n">_bigGridRows</span><span class="p">=(</span><span class="kt">int</span><span class="p">)</span><span class="n">diameter</span><span class="p">/</span><span class="n">heightDivBy</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Rotates the bigGrid.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// The rotated grid.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='bigGrid'&gt;
</span>		<span class="c1">/// The grid that overlaps the bigArea.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='studyArea'&gt;
</span>		<span class="c1">/// The region of interest.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='degree'&gt;
</span>		<span class="c1">/// A rotation angle in decimal degrees.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">GeometryCollection</span> <span class="nf">rotateGrid</span><span class="p">(</span><span class="n">GeometryCollection</span> <span class="n">bigGrid</span><span class="p">,</span> <span class="n">IGeometry</span> <span class="n">studyArea</span><span class="p">,</span> <span class="kt">int</span> <span class="n">degree</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">NetTopologySuite</span><span class="p">.</span><span class="n">Geometries</span><span class="p">.</span><span class="n">Utilities</span><span class="p">.</span><span class="n">AffineTransformation</span> <span class="n">trans</span> <span class="p">=</span>
				<span class="n">NetTopologySuite</span><span class="p">.</span><span class="n">Geometries</span><span class="p">.</span><span class="n">Utilities</span><span class="p">.</span><span class="n">AffineTransformation</span><span class="p">.</span><span class="nf">RotationInstance</span><span class="p">(</span>
					<span class="n">Degrees</span><span class="p">.</span><span class="nf">ToRadians</span> <span class="p">(</span><span class="n">degree</span><span class="p">),</span><span class="n">studyArea</span><span class="p">.</span><span class="n">Centroid</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="n">studyArea</span><span class="p">.</span><span class="n">Centroid</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
			<span class="k">return</span> <span class="p">(</span><span class="n">GeometryCollection</span><span class="p">)</span><span class="n">trans</span><span class="p">.</span><span class="nf">Transform</span> <span class="p">(</span><span class="n">bigGrid</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Filter the bigGrid for achieving a grid adjusted to the region of interest.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// A grid adjusted to the region of interest.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='bigGrid'&gt;
</span>		<span class="c1">/// A grid that exceeds the region of interest.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='studyArea'&gt;
</span>		<span class="c1">/// The region of interest.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">GeometryCollection</span> <span class="nf">gridFilter</span><span class="p">(</span><span class="n">GeometryCollection</span> <span class="n">bigGrid</span><span class="p">,</span> <span class="n">IGeometry</span> <span class="n">studyArea</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;</span><span class="n">filteredGrid</span><span class="p">=</span><span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;();</span>

			<span class="k">foreach</span><span class="p">(</span><span class="n">IPolygon</span> <span class="n">p</span> <span class="k">in</span> <span class="n">bigGrid</span><span class="p">.</span><span class="n">Geometries</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="nf">Intersects</span><span class="p">(</span><span class="n">studyArea</span><span class="p">)==</span><span class="k">true</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">filteredGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">GeometryCollection</span><span class="p">(</span><span class="n">filteredGrid</span><span class="p">.</span><span class="nf">ToArray</span> <span class="p">());</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Creates a rectangular tessellation.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// A rectangular grid.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='cellWidth'&gt;
</span>		<span class="c1">/// Cell width.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='cellHeight'&gt;
</span>		<span class="c1">/// Cell height.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numRows'&gt;
</span>		<span class="c1">/// Number of rows.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numColumns'&gt;
</span>		<span class="c1">/// Number of columns.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">GeometryCollection</span> <span class="nf">rectRepeat</span><span class="p">(</span><span class="kt">int</span> <span class="n">cellWidth</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cellHeight</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numRows</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numColumns</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;</span> <span class="n">bigGrid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;();</span>
			<span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
			<span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>

			<span class="n">GeometricShapeFactory</span> <span class="n">gsf</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GeometricShapeFactory</span><span class="p">();</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Height</span><span class="p">=</span><span class="n">Convert</span><span class="p">.</span><span class="nf">ToDouble</span><span class="p">(</span><span class="n">cellHeight</span><span class="p">);</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Width</span><span class="p">=</span><span class="n">Convert</span><span class="p">.</span><span class="nf">ToDouble</span><span class="p">(</span><span class="n">cellWidth</span><span class="p">);</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">NumPoints</span><span class="p">=</span><span class="m">4</span><span class="p">;</span>

			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">numColumns</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
			<span class="p">{</span>
				<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="n">numRows</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
				<span class="p">{</span>
					<span class="n">gsf</span><span class="p">.</span><span class="n">Base</span><span class="p">=</span><span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
					<span class="n">IPolygon</span> <span class="n">newpol</span> <span class="p">=</span> <span class="n">gsf</span><span class="p">.</span><span class="nf">CreateRectangle</span><span class="p">();</span>

					<span class="n">newpol</span><span class="p">.</span><span class="n">UserData</span><span class="p">=</span><span class="n">i</span><span class="p">+</span><span class="s">" - "</span><span class="p">+</span><span class="n">j</span><span class="p">;</span>
					<span class="n">bigGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newpol</span><span class="p">);</span>
					<span class="n">y</span> <span class="p">+=</span> <span class="n">cellHeight</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="p">!=</span><span class="m">0</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">x</span> <span class="p">+=</span> <span class="n">cellWidth</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">GeometryCollection</span><span class="p">(</span><span class="n">bigGrid</span><span class="p">.</span><span class="nf">ToArray</span> <span class="p">());</span>
		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Creates a triangular tessellation.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// A triangular tessellation.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='cellWidth'&gt;
</span>		<span class="c1">/// Cell width.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='cellHeight'&gt;
</span>		<span class="c1">/// Cell height.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numRows'&gt;
</span>		<span class="c1">/// Number of rows.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numColumns'&gt;
</span>		<span class="c1">/// Number of columns.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">GeometryCollection</span> <span class="nf">triRepeat</span><span class="p">(</span><span class="kt">int</span> <span class="n">cellWidth</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cellHeight</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numRows</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numColumns</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;</span> <span class="n">bigGrid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;();</span>
			<span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">X</span><span class="p">-</span><span class="n">cellWidth</span><span class="p">;</span>
			<span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>

			<span class="n">MyGeometricShapeFactory</span> <span class="n">gsf</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MyGeometricShapeFactory</span><span class="p">();</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Height</span><span class="p">=</span><span class="n">cellHeight</span><span class="p">;</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Width</span><span class="p">=</span><span class="n">cellWidth</span><span class="p">;</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">NumPoints</span><span class="p">=</span><span class="m">4</span><span class="p">;</span>

			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">numColumns</span><span class="p">*</span><span class="m">2</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
			<span class="p">{</span>
				<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="n">numRows</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
				<span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">%</span> <span class="m">2</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Centre</span><span class="p">=</span><span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Envelope</span><span class="p">=</span><span class="k">new</span> <span class="nf">Envelope</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">y</span><span class="p">+</span><span class="n">cellHeight</span><span class="p">);</span>
						<span class="n">IPolygon</span> <span class="n">newpol</span> <span class="p">=</span> <span class="n">gsf</span><span class="p">.</span><span class="nf">CreateTriangle</span><span class="p">();</span>

						<span class="n">newpol</span><span class="p">.</span><span class="n">UserData</span><span class="p">=</span><span class="n">i</span><span class="p">+</span><span class="s">" - "</span><span class="p">+</span><span class="n">j</span><span class="p">;</span>
						<span class="n">bigGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newpol</span><span class="p">);</span>
					<span class="p">}</span>
					<span class="k">else</span>
					<span class="p">{</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Centre</span><span class="p">=</span><span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Envelope</span><span class="p">=</span><span class="k">new</span> <span class="nf">Envelope</span><span class="p">(</span><span class="n">x</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">/</span><span class="m">2</span><span class="p">,</span><span class="n">x</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">/</span><span class="m">2</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">y</span><span class="p">+</span><span class="n">cellHeight</span><span class="p">);</span>
						<span class="n">IPolygon</span> <span class="n">newpol</span> <span class="p">=</span> <span class="n">gsf</span><span class="p">.</span><span class="nf">CreateInvertedTriangle</span><span class="p">();</span>

						<span class="n">newpol</span><span class="p">.</span><span class="n">UserData</span><span class="p">=</span><span class="n">i</span><span class="p">+</span><span class="s">" - "</span><span class="p">+</span><span class="n">j</span><span class="p">;</span>
						<span class="n">bigGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newpol</span><span class="p">);</span>
					<span class="p">}</span>
					<span class="n">y</span> <span class="p">+=</span> <span class="n">cellHeight</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="p">%</span> <span class="m">2</span><span class="p">!=</span><span class="m">0</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">x</span> <span class="p">+=</span> <span class="n">cellWidth</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">GeometryCollection</span><span class="p">(</span><span class="n">bigGrid</span><span class="p">.</span><span class="nf">ToArray</span> <span class="p">());</span>

		<span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Creates an hexagonal tessellation.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// The hexagonal tessellation
</span>		<span class="c1">/// &lt;/returns&gt;
</span>		<span class="c1">/// &lt;param name='cellWidth'&gt;
</span>		<span class="c1">/// Cell width.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='cellHeight'&gt;
</span>		<span class="c1">/// Cell height.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numRows'&gt;
</span>		<span class="c1">/// Number of rows.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='numColumns'&gt;
</span>		<span class="c1">/// Number of columns.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="c1">/// &lt;param name='radius'&gt;
</span>		<span class="c1">/// A proportion that defines the longitude of the hexagon's base.
</span>		<span class="c1">/// A larger radius is relate with a narrower base of the hexagon.
</span>		<span class="c1">/// &lt;/param&gt;
</span>		<span class="k">private</span> <span class="n">GeometryCollection</span> <span class="nf">hexRepeat</span><span class="p">(</span><span class="kt">int</span> <span class="n">cellWidth</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cellHeight</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numRows</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numColumns</span><span class="p">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;</span> <span class="n">bigGrid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">IGeometry</span><span class="p">&gt;();</span>
			<span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">X</span><span class="p">-</span><span class="n">cellWidth</span><span class="p">;</span>
			<span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>

			<span class="n">MyGeometricShapeFactory</span> <span class="n">gsf</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">MyGeometricShapeFactory</span><span class="p">();</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Height</span><span class="p">=</span><span class="n">cellHeight</span><span class="p">;</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">Width</span><span class="p">=</span><span class="n">cellWidth</span><span class="p">;</span>
			<span class="n">gsf</span><span class="p">.</span><span class="n">NumPoints</span><span class="p">=</span><span class="m">4</span><span class="p">;</span>

			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">numColumns</span><span class="p">*</span><span class="m">2</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
			<span class="p">{</span>
				<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;=</span> <span class="n">numRows</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
				<span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">%</span> <span class="m">2</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Centre</span><span class="p">=</span><span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Envelope</span><span class="p">=</span><span class="k">new</span> <span class="nf">Envelope</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">y</span><span class="p">+</span><span class="n">cellHeight</span><span class="p">);</span>
						<span class="n">IPolygon</span> <span class="n">newpol</span> <span class="p">=</span> <span class="n">gsf</span><span class="p">.</span><span class="nf">CreateHexagon</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>

						<span class="n">newpol</span><span class="p">.</span><span class="n">UserData</span><span class="p">=</span><span class="n">i</span><span class="p">+</span><span class="s">" - "</span><span class="p">+</span><span class="n">j</span><span class="p">;</span>
						<span class="n">bigGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newpol</span><span class="p">);</span>
					<span class="p">}</span>
					<span class="k">else</span>
					<span class="p">{</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Centre</span><span class="p">=</span><span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
						<span class="n">gsf</span><span class="p">.</span><span class="n">Envelope</span><span class="p">=</span><span class="k">new</span> <span class="nf">Envelope</span><span class="p">(</span><span class="n">x</span><span class="p">+(</span><span class="n">cellWidth</span><span class="p">-</span><span class="n">radius</span><span class="p">),</span><span class="n">x</span><span class="p">+</span><span class="n">cellWidth</span><span class="p">+(</span><span class="n">cellWidth</span><span class="p">-</span><span class="n">radius</span><span class="p">),</span><span class="n">y</span><span class="p">+(</span><span class="n">cellHeight</span><span class="p">/</span><span class="m">2</span><span class="p">),</span><span class="n">y</span><span class="p">+</span><span class="n">cellHeight</span><span class="p">+(</span><span class="n">cellHeight</span><span class="p">/</span><span class="m">2</span><span class="p">));</span>
						<span class="n">IPolygon</span> <span class="n">newpol</span> <span class="p">=</span> <span class="n">gsf</span><span class="p">.</span><span class="nf">CreateHexagon</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>

						<span class="n">newpol</span><span class="p">.</span><span class="n">UserData</span><span class="p">=</span><span class="n">i</span><span class="p">+</span><span class="s">" - "</span><span class="p">+</span><span class="n">j</span><span class="p">;</span>
						<span class="n">bigGrid</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newpol</span><span class="p">);</span>
					<span class="p">}</span>
					<span class="n">y</span> <span class="p">+=</span> <span class="n">cellHeight</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="p">%</span> <span class="m">2</span><span class="p">!=</span><span class="m">0</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">x</span> <span class="p">+=</span> <span class="n">cellWidth</span><span class="p">+(</span><span class="n">cellWidth</span><span class="p">-</span><span class="m">2</span><span class="p">*</span><span class="n">radius</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="n">y</span> <span class="p">=</span> <span class="n">_origin</span><span class="p">.</span><span class="n">Y</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">GeometryCollection</span><span class="p">(</span><span class="n">bigGrid</span><span class="p">.</span><span class="nf">ToArray</span> <span class="p">());</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Y ahora la clase que crea las geometrías simples:</p>

<div class="language-csharp highlighter-rouge"><pre class="highlight"><code><span class="c1">//MyGeometricShapeFactory class for creating tessellations.
//Copyright (C) 2012 Benito M. Zaragozi­
//Authors: Benito M. Zaragozi­ (www.gisandchips.org)
//Send comments and suggestions to benito.zaragozi@ua.es
</span>
<span class="c1">//This program is free software: you can redistribute it and/or modify
//it under the terms of the GNU General Public License as published by
//the Free Software Foundation, either version 3 of the License, or
//(at your option) any later version.
//
//This program is distributed in the hope that it will be useful,
//but WITHOUT ANY WARRANTY; without even the implied warranty of
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//GNU General Public License for more details.
//
//You should have received a copy of the GNU General Public License
//along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">NetTopologySuite.Utilities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">GeoAPI.Geometries</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">NetTopologySuite.Geometries</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">RepeatShapes</span>
<span class="p">{</span>
	<span class="c1">/// &lt;summary&gt;
</span>	<span class="c1">/// This class inherites from NTS's GeometricShapeFactory.
</span>	<span class="c1">/// See that rectangles are created using the parent class.
</span>	<span class="c1">/// &lt;/summary&gt;
</span>	<span class="k">public</span> <span class="k">class</span> <span class="nc">MyGeometricShapeFactory</span><span class="p">:</span><span class="n">GeometricShapeFactory</span>
	<span class="p">{</span>
		<span class="k">public</span> <span class="nf">MyGeometricShapeFactory</span> <span class="p">()</span>
		<span class="p">{</span>
		<span class="p">}</span>

		<span class="k">private</span> <span class="k">readonly</span> <span class="n">Dimensions</span> <span class="n">_dim</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Dimensions</span><span class="p">();</span>
        <span class="k">private</span> <span class="kt">int</span> <span class="n">_nPts</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Creates a triangular polygon.
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// The triangle.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>        <span class="k">public</span> <span class="n">IPolygon</span> <span class="nf">CreateTriangle</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">ipt</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">nSide</span> <span class="p">=</span> <span class="n">_nPts</span> <span class="p">/</span> <span class="m">100</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nSide</span> <span class="p">&lt;</span> <span class="m">1</span><span class="p">)</span> <span class="n">nSide</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">XsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Width</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">YsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Width</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>

            <span class="n">Coordinate</span><span class="p">[]</span> <span class="n">pts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Coordinate</span><span class="p">[</span><span class="m">3</span> <span class="p">*</span> <span class="n">nSide</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
            <span class="n">Envelope</span> <span class="n">env</span> <span class="p">=</span> <span class="p">(</span><span class="n">Envelope</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">XsegLen</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
            	<span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span> <span class="p">-</span> <span class="n">XsegLen</span><span class="p">/</span><span class="m">2</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
<span class="c1">//            for (i = 0; i &lt; nSide; i++)
//            {
//                double x = env.MinX;
//                double y = env.MaxY - i * YsegLen;
//                pts[ipt++] = (Coordinate)CreateCoord(x, y);
//            }
</span>            <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>

            <span class="n">ILinearRing</span> <span class="n">ring</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreateLinearRing</span><span class="p">(</span><span class="n">pts</span><span class="p">);</span>
            <span class="n">IPolygon</span> <span class="n">poly</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreatePolygon</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">poly</span><span class="p">;</span>
        <span class="p">}</span>

		<span class="c1">/// &lt;summary&gt;
</span>		<span class="c1">/// Creates an inverted triangle (up-down).
</span>		<span class="c1">/// &lt;/summary&gt;
</span>		<span class="c1">/// &lt;returns&gt;
</span>		<span class="c1">/// The inverted triangle.
</span>		<span class="c1">/// &lt;/returns&gt;
</span>        <span class="k">public</span> <span class="n">IPolygon</span> <span class="nf">CreateInvertedTriangle</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">ipt</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">nSide</span> <span class="p">=</span> <span class="n">_nPts</span> <span class="p">/</span> <span class="m">100</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nSide</span> <span class="p">&lt;</span> <span class="m">1</span><span class="p">)</span> <span class="n">nSide</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">XsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Width</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">YsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Width</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>

            <span class="n">Coordinate</span><span class="p">[]</span> <span class="n">pts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Coordinate</span><span class="p">[</span><span class="m">3</span> <span class="p">*</span> <span class="n">nSide</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
            <span class="n">Envelope</span> <span class="n">env</span> <span class="p">=</span> <span class="p">(</span><span class="n">Envelope</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">XsegLen</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
            	<span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span> <span class="p">+</span> <span class="n">XsegLen</span><span class="p">/</span><span class="m">2</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxY</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>

            <span class="n">ILinearRing</span> <span class="n">ring</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreateLinearRing</span><span class="p">(</span><span class="n">pts</span><span class="p">);</span>
            <span class="n">IPolygon</span> <span class="n">poly</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreatePolygon</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">poly</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;
</span>        <span class="c1">/// Creates an hexagon adjusted by a radius parameter.
</span>        <span class="c1">/// &lt;/summary&gt;
</span>        <span class="c1">/// &lt;returns&gt;
</span>        <span class="c1">/// The hexagon.
</span>        <span class="c1">/// &lt;/returns&gt;
</span>        <span class="c1">/// &lt;param name='radius'&gt;
</span>        <span class="c1">/// A proportion that defines the longitude of the hexagon's base.
</span>		<span class="c1">/// A larger radius is relate with a narrower base of the hexagon.
</span>        <span class="c1">/// &lt;/param&gt;
</span>        <span class="k">public</span> <span class="n">IPolygon</span> <span class="nf">CreateHexagon</span><span class="p">(</span><span class="kt">int</span> <span class="n">radius</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">ipt</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">nSide</span> <span class="p">=</span> <span class="n">_nPts</span> <span class="p">/</span> <span class="m">100</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nSide</span> <span class="p">&lt;</span> <span class="m">1</span><span class="p">)</span> <span class="n">nSide</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">XsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Width</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">YsegLen</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">.</span><span class="n">Height</span><span class="p">/</span><span class="n">nSide</span><span class="p">;</span>

            <span class="n">Coordinate</span><span class="p">[]</span> <span class="n">pts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Coordinate</span><span class="p">[</span><span class="m">6</span> <span class="p">*</span> <span class="n">nSide</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
            <span class="n">Envelope</span> <span class="n">env</span> <span class="p">=</span> <span class="p">(</span><span class="n">Envelope</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">Envelope</span><span class="p">;</span>

             <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span> <span class="p">+</span> <span class="n">radius</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">XsegLen</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span> <span class="p">-</span> <span class="n">radius</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span><span class="p">+(</span><span class="n">env</span><span class="p">.</span><span class="n">Height</span><span class="p">/</span><span class="m">2</span><span class="p">)</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxX</span> <span class="p">-</span> <span class="n">radius</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxY</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span> <span class="p">+</span> <span class="n">radius</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">XsegLen</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MaxY</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nSide</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">double</span> <span class="n">x</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinX</span><span class="p">;</span>
                <span class="kt">double</span> <span class="n">y</span> <span class="p">=</span> <span class="n">env</span><span class="p">.</span><span class="n">MinY</span><span class="p">+(</span><span class="n">env</span><span class="p">.</span><span class="n">Height</span><span class="p">/</span><span class="m">2</span><span class="p">)</span> <span class="p">+</span> <span class="n">i</span> <span class="p">*</span> <span class="n">YsegLen</span><span class="p">;</span>
                <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="p">(</span><span class="n">Coordinate</span><span class="p">)</span><span class="nf">CreateCoord</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">pts</span><span class="p">[</span><span class="n">ipt</span><span class="p">++]</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Coordinate</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>

            <span class="n">ILinearRing</span> <span class="n">ring</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreateLinearRing</span><span class="p">(</span><span class="n">pts</span><span class="p">);</span>
            <span class="n">IPolygon</span> <span class="n">poly</span> <span class="p">=</span> <span class="n">GeomFact</span><span class="p">.</span><span class="nf">CreatePolygon</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">poly</span><span class="p">;</span>
        <span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#computational-geometry" class="page__taxonomy-item" rel="tag">computational geometry</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#csharp" class="page__taxonomy-item" rel="tag">csharp</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#nettopologysuite" class="page__taxonomy-item" rel="tag">NetTopologySuite</a>
    
    </span>
  </p>




  






  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#analysis" class="page__taxonomy-item" rel="tag">Analysis</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#programming" class="page__taxonomy-item" rel="tag">Programming</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2012-11-21T00:00:00+00:00">November 21, 2012</time></p>
        
      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=/analysis/programming/crear-teselaciones-repitiendo-formas-hasta-decir-basta/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=/analysis/programming/crear-teselaciones-repitiendo-formas-hasta-decir-basta/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=/analysis/programming/crear-teselaciones-repitiendo-formas-hasta-decir-basta/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=/analysis/programming/crear-teselaciones-repitiendo-formas-hasta-decir-basta/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="/presentaci%C3%B3n/taller-de-gps/" class="pagination--pager" title="Taller de GPS
">Previous</a>
    
    
      <a href="/analysis/presentation/diapositivas-del-ultimo-meetup-sobre-simbologia-cartografica-estandares-y-sig/" class="pagination--pager" title="Diapositivas del último meetup sobre simbología cartográfica, estándares y SIG
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/benizar81"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
      <li><a href="https://facebook.com/benizar81"><i class="fa fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    
    
      <li><a href="http://github.com/benizar"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
      <li><a href="http://bitbucket.org/benizar"><i class="fa fa-fw fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    
    <li><a href="/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Benito Zaragozí. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-81625023-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>

